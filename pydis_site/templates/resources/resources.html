{% extends 'base/base.html' %}
{% load static %}

{% block title %}Resources{% endblock %}
{% block head %}
  <link rel="stylesheet" href="{% static "css/resources/resources.css" %}">
{% endblock %}

{% block content %}
  {% include "base/navbar.html" %}

  <section class="section">
      <div class="container">
          <div class="content">
             <h1 class="resource-title has-text-centered">Resources</h1>
              <hr/>
          </div>
          <div class="panel">
              <p class="panel-heading has-text-centered">Search Options</p>

              <div class="field">
                  <div class="columns">
                      <div class="column has-text-centered">
                          Topic

                          <div class="field">
                              <label class="checkbox">
                                <input name="checkboxOption" type="checkbox" value="topic1">
                                  <span class="has-text-grey is-size-7">Topic1</span>
                              </label>
                          </div>

                          <div class="field">
                              <label class="checkbox">
                                <input name="checkboxOption" type="checkbox" value="topic2">
                                  <span class="has-text-grey is-size-7">Topic1</span>
                              </label>
                          </div>

                      </div>

                        <div class="column has-text-centered">
                            Type
                            <div class="field">
                              <label class="checkbox">
                                <input type="checkbox">
                                    <span class="has-text-grey is-size-7">Remember me</span>
                              </label>
                          </div>
                        </div>

                        <div class="column has-text-centered">
                            Payment
                            <div class="field">
                              <label class="checkbox">
                                <input type="checkbox">
                                    <span class="has-text-grey is-size-7">Remember me</span>
                              </label>
                          </div>
                        </div>

                        <div class="column has-text-centered">
                            Level
                            <div class="field">
                              <label class="checkbox">
                                <input type="checkbox">
                                    <span class="has-text-grey is-size-7">Remember me</span>
                              </label>
                          </div>
                        </div>
                  </div>

                  <div class="control pl-3 pb-3">
                    <button onclick="buildQueryParams()" class="button is-link is-small">Search</button>
                  </div>

              </div>
          </div>
      </div>
  </section>
<script>
    function buildQueryParams(){
        let params = new URLSearchParams(window.location.search);
        const checkBoxes = document.querySelectorAll("input[name='checkboxOption']");
        let allOptions = "";
        checkBoxes.forEach((x) => {
            if(x.checked){
                allOptions += x.value + ",";
            }
        });
        params.set("checkboxOptions", allOptions);

        window.location.search = params;
        window.location.reload();
    }
</script>
{% endblock %}
